#Guice injected behaviour (java as the action language)

== How do I get an `EntityManager` in my behaviour class? ==
The answer is inject one but ensure that if the current thread already has an open entity manager that you reuse that one otherwise you create one from the `EntityManagerFactory`.

In your injector module use [http://www.google.com/codesearch/p?hl=en#Yl0srusBlss/trunk/xUmlCompiler/src/java/moten/david/util/persistence/ThreadLocalEntityManagerFactory.java&q=entitymanagerfactory%20package:http://xuml-compiler\.googlecode\.com&sa=N&cd=1&ct=rc ThreadLocalEntityManagerFactory]: 
{{{
  bind(EntityManager.class).to(ThreadLocalEntityManagerProvider.class);
}}}