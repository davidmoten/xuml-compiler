<html>
<head>
<script type="text/javascript"
    src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<style type="text/css">
#presentation {min-height:5em;width:100%}
#xml {min-height:10em;width:100%}
body {font-family: Tahoma, Geneva, sans-serif;font-size:80%%;}
.mandatory {color:red;float:left;}
label {float:left;clear:left;padding-top:0.3em;}
input {margin-bottom:10px;}
textarea {margin-bottom:10px;}
#get {color:blue; text-decoration: underline;}
#save {color:blue; text-decoration: underline;clear:left;float:left;}
#load {color:blue; text-decoration: underline;float:left;padding-left:10px;}
#status {color:gray; float:left;padding-left:10px;}
#error {color:red;}
</style>
<script>
$(function() {
	
	var setStatus = function(s){
		$("#status").text(s);
	}
	var setError = function(s){
		$("#error").text(s);
		setStatus("Error occurred");
	}
	$("#save").click(function() {
		var id = $("#saveId").val();
		var xml = $("#xml").val();
		var presentation = $("#presentation").val();
		setStatus("saving...");
		setError("");
		jQuery.post("model",{id:id, xml:xml},function() {
			setStatus("saved");
		})
		.error( function (request, status, error) {
        	setError(request.responseText);
    	});
		if (presentation.length >0){
			var x = {entity:id + "-presentation",property:"presentation",value:presentation};
			jQuery.post("ds",x,function() {
				setStatus("saved");
			});
		}
	});
	$("#load").click(function() {
		var id = $("#saveId").val();
		var data = {entity:id + "-model",property:"model",mime: "text/plain"}
		setStatus("loading");
		jQuery.get("ds",data, function(x) {
			$("#xml").val(x);
			setStatus("loaded");
		});
		data.entity=id + "-presentation";
		data.property="presentation";
		jQuery.get("ds",data, function(x) {
			$("#presentation").val(x);
			setStatus("loaded");
		});
	})
	$("#get").click(function() {
		var id = $("#getId").val();
		window.location = "cd?id="+id;
	});
});
</script>

</head>
<body>

<h2>XUML Tools</h2>
<p>XUML Tools includes a Class Diagram Viewer (perhaps later an Editor) that parses a model definition (specified in xml)
 and a JSON presentation string (optional) and displays a class diagram from the model in an html 5 viewer for manipulation by the user.</p>
 <p>Here is an <a href="class-diagram-sample.html">example class diagram.</a></p>
<h3>XUML Schema</h3>
<p>The xml schema (XSD) for model definitions is <a href="schema">here</a>.</p>
<h3>Display a class diagram</h3>
<label for="id">Class Diagram Id:</label><div class="mandatory">*</div><input type="text" id = "getId" name="id" value="1"></input>
<div id="get">Display</div>

<h3>Load/Save a class diagram</h3>
<label for="id">Class Diagram Id:</label><div class="mandatory">*</div>
<input type="text" id="saveId" name="id" value="1"></input><br/>
<div id="error"></div>
<label for="xml">Model definition (xml):</label><div class="mandatory">*</div><br/>
	<textarea name="xml" id="xml"></textarea><br/>
<label for="presentation">Presentation (JSON):</label><br/>
	<textarea name="presentation" id="presentation"></textarea><br/>
<div id="save">Save</div>
<div id="load">Load</div> 
<div id="status"></div>

</body>
</html>
