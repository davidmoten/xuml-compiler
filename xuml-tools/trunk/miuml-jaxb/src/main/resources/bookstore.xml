<?xml version="1.0" encoding="UTF-8" ?>
<Domains xmlns="http://www.miuml.org/metamodel" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.miuml.org/metamodel miuml-metamodel.xsd">

	<DomainBuildSpecification Name="Base"
		DomainNameIsDefaultSubsystemName="true" DefaultSubsystemName="Subsystem"
		DefaultSubsystemRange="100" DefaultIdName="Id" DefaultIdType="arbitraryId" />

	<SymbolicType Name="string" MinLength="1" MaxLength="4096"
		Prefix="" Suffix="" ValidationPattern="?.*" DefaultValue="" />
	<IntegerType Name="date" Units="epoch ms" DefaultValue="0"
		UpperLimit="99999999999" LowerLimit="-9999999999999" />
	<IntegerType Name="timestamp" Units="epoch ms"
		DefaultValue="0" UpperLimit="99999999999" LowerLimit="-9999999999999" />
	<IntegerType Name="time" Units="epoch ms" DefaultValue="0"
		UpperLimit="99999999999" LowerLimit="-9999999999999" />
	<IntegerType Name="arbitraryId" Units="None" DefaultValue="1"
		UpperLimit="99999999999" LowerLimit="1" />

	<IntegerType Name="Nominal" Units="None" DefaultValue="1"
		UpperLimit="99999999999" LowerLimit="1" />
	<IntegerType Name="Year" Units="year" DefaultValue="0"
		UpperLimit="2100" LowerLimit="-5000" />
	<RealType Name="Money" Precision="2" Units="Dollars"
		LowerLimit="0" UpperLimit="999999999999" DefaultValue="0" />
	<IntegerType Name="Count" Units="Instances" DefaultValue="0"
		UpperLimit="999999999999" LowerLimit="0" />
	<SymbolicType Name="Bank Card Approval Code" MinLength="1"
		MaxLength="64" Prefix="" Suffix="" ValidationPattern=".*"
		DefaultValue="" />
	<SymbolicType Name="Bank Card Account Number" MinLength="1"
		MaxLength="64" Prefix="" Suffix="" ValidationPattern=".*"
		DefaultValue="" />
	<SymbolicType Name="Month Year" MinLength="6" MaxLength="6"
		Prefix="" Suffix="" ValidationPattern="[01][0-9][12][9012345][0-9]"
		DefaultValue="" />

	<ModeledDomain Name="Bookstore">

		<!-- types local to the domain -->
		<SymbolicType Name="ISBN Group Identifier" MinLength="5"
			MaxLength="5" Prefix="" Suffix="" ValidationPattern="\d{5}"
			DefaultValue="" />
		<SymbolicType Name="ISBN Publisher Prefix" MinLength="2"
			MaxLength="2" Prefix="" Suffix="" ValidationPattern="[^\s]{5}"
			DefaultValue="" />
		<SymbolicType Name="Universal Product Code" MinLength="1"
			MaxLength="64" Prefix="" Suffix="" ValidationPattern=".*"
			DefaultValue="" />
		<SymbolicType Name="Website URL" MinLength="1" MaxLength="2000"
			Prefix="" Suffix="" ValidationPattern=".*" DefaultValue="" />
		<SymbolicType Name="Personal Name" MinLength="1"
			MaxLength="512" Prefix="" Suffix="" ValidationPattern=".*"
			DefaultValue="" />
		<SymbolicType Name="Mailing Address" MinLength="1"
			MaxLength="512" Prefix="" Suffix="" ValidationPattern=".*"
			DefaultValue="" />
		<SymbolicType Name="Internet Email Address" MinLength="1"
			MaxLength="512" Prefix="" Suffix="" ValidationPattern=".*"
			DefaultValue="" />
		<SymbolicType Name="Telephone Number" MinLength="1"
			MaxLength="256" Prefix="" Suffix="" ValidationPattern=".*"
			DefaultValue="" />

		<Subsystem Name="Product Specification" Alias="Product Specification"
			Floor="11" Ceiling="20">

			<SpecializedClass Name="Product" Cnum="1" Element="1"
				Alias="Product">
				<IndependentAttribute Name="ProductID"
					Type="UniversalProductCode">
					<Identifier Number="1" />
				</IndependentAttribute>
				<DerivedAttribute Name="Product Name" Formula="formula for product name"
					Type="string" />
				<IndependentAttribute Name="Copyright" Type="Year" />
				<IndependentAttribute Name="Unit Price" Type="Money" />
				<IndependentAttribute Name="Description" Type="string" />
				<IndependentAttribute Name="Website" Type="WebsiteURL" />
			</SpecializedClass>

			<SpecializedClass Name="Special Order Product"
				Alias="Special Order Product">
				<IndependentAttribute Name="Special Order Instructions"
					Type="string" />
				<IndependentAttribute Name="Days to Deliver"
					Type="Count" />
			</SpecializedClass>

			<SpecializedClass Name="Stocked Product">
				<IndependentAttribute Name="Quantity On hand"
					Type="Count" />
				<IndependentAttribute Name="Reorder Threshold"
					Type="Count" />
				<IndependentAttribute Name="Reorder Increment"
					Type="Count" />
				<IndependentAttribute Name="Reorder Instructions"
					Type="string" />
			</SpecializedClass>

			<NonSpecializedClass Name="Product Category">
				<IndependentAttribute Name="Category ID" Type="arbitraryId">
					<Identifier Number="1" />
				</IndependentAttribute>
				<IndependentAttribute Name="Category Name"
					Type="string" />
			</NonSpecializedClass>

			<NonSpecializedClass Name="Publisher">
				<IndependentAttribute Name="Group code"
					Type="ISBNGroupIdentifier">
					<Identifier Number="1" />
				</IndependentAttribute>
				<IndependentAttribute Name="Publisher code"
					Type="ISBNPublisherPrefix">
					<Identifier Number="1" />
				</IndependentAttribute>
				<IndependentAttribute Name="Name" Type="string" />
				<IndependentAttribute Name="Address" Type="MailingAddress" />
				<IndependentAttribute Name="Website" Type="WebsiteURL" />
			</NonSpecializedClass>

			<Generalization Rnum="12" Superclass="Product">
				<SpecializedClass Name="Stocked Product" />
				<SpecializedClass Name="Special Order Product" />
			</Generalization>

			<BinaryAssociation Rnum="15">
				<ActivePerspective Phrase="classifies"
					ViewedClass="Product" OnePerspective="false" Conditional="true" />
				<PassivePerspective Phrase="is classified according to"
					ViewedClass="Product Category" OnePerspective="true" Conditional="false" />
			</BinaryAssociation>

			<BinaryAssociation Rnum="14">
				<ActivePerspective Phrase="is divided into"
					ViewedClass="Product Category" OnePerspective="false" Conditional="true" />
				<PassivePerspective Phrase="is part of"
					ViewedClass="Product Category" OnePerspective="true" Conditional="true" />
			</BinaryAssociation>

			<BinaryAssociation Rnum="1">
				<ActivePerspective Phrase="produces and markets"
					ViewedClass="Product" OnePerspective="false" Conditional="true" />
				<PassivePerspective Phrase="is produced and marketed by"
					ViewedClass="Publisher" OnePerspective="true" Conditional="false" />
			</BinaryAssociation>

		</Subsystem>

		<Subsystem Name="Ordering" Alias="Ordering" Floor="1"
			Ceiling="10">

			<NonSpecializedClass Name="Shopping Cart">
				<IndependentAttribute Name="Cart ID" Type="arbitraryId">
					<Identifier Number="1" />
				</IndependentAttribute>
				<DerivedAttribute Name="Total value" Formula="formula for total value"
					Type="Money" />
			</NonSpecializedClass>

			<NonSpecializedClass Name="Order">
				<IndependentAttribute Name="Order ID" Type="arbitraryId">
					<Identifier Number="1" />
				</IndependentAttribute>
				<IndependentAttribute Name="Date order placed"
					Type="date" />
				<DerivedAttribute Name="Total value" Formula="formula for total value"
					Type="Money" />
				<IndependentAttribute Name="Recipient" Type="Personal Name" />
				<IndependentAttribute Name="Delivery address"
					Type="Mailing Address" />
				<IndependentAttribute Name="Contact phone"
					Type="Telephone Number" />

				<Lifecycle>

					<State Name="Establishing Customer and Verifying Payment" />
					<State Name="Making Charge" />
					<State Name="Being Packed and Shipped" />
					<State Name="Payment Not Approved" />
					<State Name="Delivered to Customer" />

					<CreationEvent Name="Check out" ID="1"
						State="Establishing Customer and Verifying Payment">
						<StateModelParameter Name="Cart" Type="arbitraryId" />
						<StateModelParameter Name="Account number"
							Type="Bank Card Account Number" />
						<StateModelParameter Name="Billing address"
							Type="Mailing Address" />
						<StateModelParameter Name="Card expiration date]"
							Type="Month Year" />
						<StateModelParameter Name="Cardholder name"
							Type="Personal Name" />
						<StateModelParameter Name="Customer email"
							Type="Internet Email Address" />
						<StateModelParameter Name="Customer Name"
							Type="Personal Name" />
						<StateModelParameter Name="Billing address"
							Type="Mailing Address" />
						<StateModelParameter Name="Customer phone"
							Type="Telephone Number" />
						<StateModelParameter Name="Shipping address"
							Type="Mailing Address" />
					</CreationEvent>

					<LocalEffectiveSignalingEvent Name="Submit charge"
						ID="2">
						<StateModelParameter Name="Cart" Type="arbitraryId" />
						<StateModelParameter Name="Account number"
							Type="Bank Card Account Number" />
						<StateModelParameter Name="Billing address"
							Type="Mailing Address" />
						<StateModelParameter Name="Card expiration date"
							Type="Month Year" />
						<StateModelParameter Name="Cardholder name"
							Type="Personal Name" />
					</LocalEffectiveSignalingEvent>

					<LocalEffectiveSignalingEvent Name="Payment declined"
						ID="3" />
					<LocalEffectiveSignalingEvent Name="Payment approved"
						ID="4" />
					<LocalEffectiveSignalingEvent Name="Order delivered"
						ID="5" />

					<Transition State="Establishing Customer and Verifying Payment"
						Destination="Making Charge" EventID="2" />
					<Transition State="Making Charge" Destination="Payment Not Approved"
						EventID="3" />
					<Transition State="Making Charge" Destination="Being Packed and Shipped"
						EventID="5" />
				</Lifecycle>

			</NonSpecializedClass>

			<NonSpecializedClass Name="Customer">
				<IndependentAttribute Name="Email"
					Type="Internet Email Address">
					<Identifier Number="1" />
				</IndependentAttribute>
				<IndependentAttribute Name="Name" Type="Personal Name" />
				<IndependentAttribute Name="Shipping address"
					Type="Mailing Address" />
				<IndependentAttribute Name="Phone" Type="Telephone Number" />
				<IndependentAttribute Name="Purchases made"
					Type="Count" />
			</NonSpecializedClass>

			<NonSpecializedClass Name="Credit Card Charge">
				<IndependentAttribute Name="Charge Id" Type="arbitraryId">
					<Identifier Number="1" />
				</IndependentAttribute>
				<IndependentAttribute Name="Account number"
					Type="Bank Card Account Number" />
				<IndependentAttribute Name="Cardholder name"
					Type="Personal Name" />
				<IndependentAttribute Name="Billing address"
					Type="Mailing Address" />
				<IndependentAttribute Name="Card expiration date"
					Type="Month Year" />
				<IndependentAttribute Name="Date charge made"
					Type="date" />
				<IndependentAttribute Name="Charge amount"
					Type="Money" />
				<IndependentAttribute Name="Approval code"
					Type="Bank Card Approval Code" />
			</NonSpecializedClass>

			<NonSpecializedClass Name="Product Selection"
				Association="4">
				<IndependentAttribute Name="Quantity" Type="Count" />
				<IndependentAttribute Name="Unit price of selection"
					Type="Money" />
				<DerivedAttribute Name="Selection value" Type="Money"
					Formula="selection value formula" />
			</NonSpecializedClass>

		</Subsystem>

	</ModeledDomain>

	<ModeledDomain Name="miUML">

		<Subsystem Name="Class and Attribute" Floor="20" Ceiling="40">

			<SpecializedClass Name="Class">
				<IndependentAttribute Name="Domain" Type="string">
					<Identifier Number="1" />
				</IndependentAttribute>
				<IndependentAttribute Name="Name" Type="string">
					<Identifier Number="1" />
				</IndependentAttribute>
			</SpecializedClass>

			<SpecializedClass Name="Attribute">
				<IndependentAttribute Name="Domain" Type="string">
					<Identifier Number="1" />
				</IndependentAttribute>
				<ReferentialAttribute Name="Class">
					<ToOneReference Relationship="1" />
				</ReferentialAttribute>
				<IndependentAttribute Name="Name" Type="string">
					<Identifier Number="1" />
				</IndependentAttribute>
				<IndependentAttribute Name="Type" Type="string" />
			</SpecializedClass>

			<BinaryAssociation Rnum="1">
				<ActivePerspective Phrase="characterizes"
					ViewedClass="Class" OnePerspective="true" Conditional="false" />
				<PassivePerspective Phrase="is characterized by"
					ViewedClass="Attribute" OnePerspective="false" Conditional="false" />
			</BinaryAssociation>

		</Subsystem>
	</ModeledDomain>

	<ModeledDomain Name="Nested composite id example">

		<Subsystem Name="Composite Id example" Floor="61" Ceiling="80">

			<SpecializedClass Name="A">

				<IndependentAttribute Name="A one" Type="string">
					<Identifier Number="1" />
				</IndependentAttribute>
				<IndependentAttribute Name="A two" Type="string">
					<Identifier Number="1" />
				</IndependentAttribute>
				<IndependentAttribute Name="A three" Type="string" />
			</SpecializedClass>

			<SpecializedClass Name="B">
				<IndependentAttribute Name="B one" Type="string">
					<Identifier Number="1" />
				</IndependentAttribute>
				<ReferentialAttribute Name="B A one">
					<Identifier Number="1" />
					<ToOneReference Relationship="1" Attribute="A one" />
				</ReferentialAttribute>
				<ReferentialAttribute Name="B A two">
					<Identifier Number="1" />
					<ToOneReference Relationship="1" Attribute="A two" />
				</ReferentialAttribute>
				<IndependentAttribute Name="B two" Type="string" />
			</SpecializedClass>

			<SpecializedClass Name="C">
				<IndependentAttribute Name="C one" Type="string">
					<Identifier Number="1" />
				</IndependentAttribute>
				<ReferentialAttribute Name="C B one">
					<Identifier Number="1" />
					<ToOneReference Relationship="2" Attribute="B one" />
				</ReferentialAttribute>
				<ReferentialAttribute Name="C B A one">
					<Identifier Number="1" />
					<ToOneReference Relationship="2" Attribute="B A one" />
				</ReferentialAttribute>
				<ReferentialAttribute Name="C B A two">
					<Identifier Number="1" />
					<ToOneReference Relationship="2" Attribute="B A two" />
				</ReferentialAttribute>
				<IndependentAttribute Name="C two" Type="string" />
			</SpecializedClass>

			<BinaryAssociation Rnum="1">
				<ActivePerspective Phrase="characterizes"
					ViewedClass="B" OnePerspective="false" Conditional="false" />
				<PassivePerspective Phrase="is characterized by"
					ViewedClass="A" OnePerspective="true" Conditional="false" />
			</BinaryAssociation>

			<BinaryAssociation Rnum="2">
				<ActivePerspective Phrase="characterizes"
					ViewedClass="C" OnePerspective="false" Conditional="false" />
				<PassivePerspective Phrase="is characterized by"
					ViewedClass="B" OnePerspective="true" Conditional="false" />
			</BinaryAssociation>


		</Subsystem>
	</ModeledDomain>

</Domains>